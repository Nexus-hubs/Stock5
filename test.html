<!DOCTYPE html>
<html>
<head>
    <title>Stock5 Test</title>
</head>
<body>
    <h1>Stock5 Debug Test</h1>
    <div id="output"></div>
    <script>
        const DEMO_DATA = {
            'AAPL': { symbol: 'AAPL', longName: 'Apple Inc.', regularMarketPrice: 189.25 },
            'MSFT': { symbol: 'MSFT', longName: 'Microsoft', regularMarketPrice: 378.91 },
            'GOOGL': { symbol: 'GOOGL', longName: 'Alphabet', regularMarketPrice: 142.58 },
            'TSLA': { symbol: 'TSLA', longName: 'Tesla', regularMarketPrice: 242.84 }
        };

        async function fetchStockData(symbols) {
            console.log('fetchStockData called with:', symbols);
            const symbolArray = Array.isArray(symbols) ? symbols : [symbols];
            console.log('symbolArray:', symbolArray);
            const results = [];

            for (const symbol of symbolArray) {
                console.log('Looking up:', symbol);
                const stockData = DEMO_DATA[symbol.toUpperCase()];
                console.log('Found:', stockData);
                if (stockData) {
                    results.push(stockData);
                }
            }

            console.log('Results:', results);
            if (results.length === 0) {
                throw new Error('Stock symbol not found');
            }

            return results;
        }

        async function test() {
            try {
                const symbols = ['AAPL', 'MSFT', 'GOOGL', 'TSLA'];
                const data = await fetchStockData(symbols);
                document.getElementById('output').innerHTML =
                    '<pre>' + JSON.stringify(data, null, 2) + '</pre>';
                console.log('Success!', data);
            } catch (error) {
                document.getElementById('output').innerHTML =
                    '<p style="color:red">Error: ' + error.message + '</p>';
                console.error('Error:', error);
            }
        }

        test();
    </script>
</body>
</html>
